{"version":3,"file":"oanda-positions.mjs","sources":["../../../../../../../server/api/balance/oanda-positions.ts"],"sourcesContent":null,"names":["oandaPositions","defineEventHandler","async","event","config","useRuntimeConfig","apiKey","oandaApiKey","baseUrl","oandaBaseUrl","accountId","oandaAccountId","Error","cleanBaseUrl","endsWith","slice","positionsResponse","$fetch","method","headers","Authorization","console","log","positions","length","instruments","map","pos","instrument","pricingData","instrumentsList","join","pricingResponse","encodeURIComponent","prices","forEach","price","bid","parseFloat","_b","_a","bids","ask","_d","_c","asks","pricingError","error","message","String","formattedPositions","longUnits","long","units","shortUnits","short","isLong","Math","abs","side","entryPrice","averagePrice","unrealizedPnl","_e","unrealizedPL","_f","longData","shortData","currentPrice","isNaN","positionSizeUsd","unrealizedPnlPercent","symbol","id","entry_price","current_price","quantity","position_size_usd","unrealized_pnl_usd","unrealized_pnl_percent","entry_time","_h","_g","tradeIDs","Date","toISOString","exchange","asset_class","success","count"],"mappings":"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"}