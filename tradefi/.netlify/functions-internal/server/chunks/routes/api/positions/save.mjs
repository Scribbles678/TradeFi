import{d as s,r as e}from"../../../_/nitro.mjs";import{a as t,s as o}from"../../../_/supabase.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"@supabase/supabase-js";const r=s((async s=>{try{const r=await e(s);console.log("Saving position:",r.symbol);const i={symbol:r.symbol,side:r.side,asset_class:r.asset_class||"crypto",exchange:r.exchange||"aster",entry_price:r.entry_price,entry_time:r.entry_time,quantity:r.quantity,position_size_usd:r.position_size_usd,current_price:r.current_price,unrealized_pnl_usd:r.unrealized_pnl_usd,unrealized_pnl_percent:r.unrealized_pnl_percent,stop_loss_price:r.stop_loss_price||null,take_profit_price:r.take_profit_price||null,stop_loss_percent:r.stop_loss_percent||null,take_profit_percent:r.take_profit_percent||null,notes:r.notes||null};if(r.id){const s=await t(r.id,i);return s?{success:!0,position:s,message:"Position updated successfully"}:{success:!1,error:"Failed to update position"}}{const s=await o(i);return s?{success:!0,position:s,message:"Position saved successfully"}:{success:!1,error:"Failed to save position"}}}catch(s){return console.error("Error in /api/positions/save:",s),{success:!1,error:"Internal server error",details:s instanceof Error?s.message:"Unknown error"}}}));export{r as default};
//# sourceMappingURL=save.mjs.map
