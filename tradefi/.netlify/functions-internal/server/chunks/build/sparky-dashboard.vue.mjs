import{_ as e}from"./Badge.vue.mjs";import{_ as t}from"./Card.vue.mjs";import{p as a,h as l,t as n,c as o,b as i}from"./server.mjs";import{mergeModels as r,useSlots as s,ref as d,computed as u,useModel as c,watch as p,unref as g,mergeProps as f,withCtx as m,createVNode as b,createBlock as v,createCommentVNode as y,openBlock as x,renderSlot as h,createTextVNode as $,toDisplayString as _,Fragment as w,renderList as k,useSSRContext as O,defineComponent as C}from"vue";import{ssrRenderComponent as j,ssrRenderClass as S,ssrRenderSlot as F,ssrInterpolate as P,ssrRenderList as q,ssrRenderAttr as D,ssrRenderAttrs as z}from"vue/server-renderer";import{Primitive as A}from"reka-ui";import{O as R}from"../_/nitro.mjs";import{useVueTable as M,getExpandedRowModel as I,getSortedRowModel as T,getFilteredRowModel as U,getCoreRowModel as B,FlexRender as L}from"@tanstack/vue-table";import{reactiveOmit as V}from"@vueuse/core";import{g as E}from"./supabase.mjs";import Y from"chart.js/auto";import{_ as G}from"./_plugin-vue_export-helper.mjs";import"vue-router";import"@supabase/ssr";import"@iconify/vue";import"tailwindcss/colors";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"unhead/utils";import"devalue";import"tailwind-variants";import"@iconify/utils/lib/css/icon";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"node:crypto";import"consola";import"node:url";import"ipx";import"node:fs";import"node:path";import"@supabase/supabase-js";const N={slots:{root:"relative overflow-auto",base:"min-w-full overflow-clip",caption:"sr-only",thead:"relative [&>tr]:after:absolute [&>tr]:after:inset-x-0 [&>tr]:after:bottom-0 [&>tr]:after:h-px [&>tr]:after:bg-(--ui-border-accented)",tbody:"divide-y divide-default [&>tr]:data-[selectable=true]:hover:bg-elevated/50 [&>tr]:data-[selectable=true]:focus-visible:outline-primary",tr:"data-[selected=true]:bg-elevated/50",th:"px-4 py-3.5 text-sm text-highlighted text-left rtl:text-right font-semibold [&:has([role=checkbox])]:pe-0",td:"p-4 text-sm text-muted whitespace-nowrap [&:has([role=checkbox])]:pe-0",empty:"py-6 text-center text-sm text-muted",loading:"py-6 text-center"},variants:{pinned:{true:{th:"sticky bg-default/75 data-[pinned=left]:left-0 data-[pinned=right]:right-0",td:"sticky bg-default/75 data-[pinned=left]:left-0 data-[pinned=right]:right-0"}},sticky:{true:{thead:"sticky top-0 inset-x-0 bg-default/75 z-[1] backdrop-blur"}},loading:{true:{thead:"after:absolute after:bottom-0 after:inset-x-0 after:h-px"}},loadingAnimation:{carousel:"","carousel-inverse":"",swing:"",elastic:""},loadingColor:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""}},compoundVariants:[{loading:!0,loadingColor:"primary",class:{thead:"after:bg-primary"}},{loading:!0,loadingColor:"secondary",class:{thead:"after:bg-secondary"}},{loading:!0,loadingColor:"success",class:{thead:"after:bg-success"}},{loading:!0,loadingColor:"info",class:{thead:"after:bg-info"}},{loading:!0,loadingColor:"warning",class:{thead:"after:bg-warning"}},{loading:!0,loadingColor:"error",class:{thead:"after:bg-error"}},{loading:!0,loadingColor:"neutral",class:{thead:"after:bg-inverted"}},{loading:!0,loadingAnimation:"carousel",class:{thead:"after:animate-[carousel_2s_ease-in-out_infinite] rtl:after:animate-[carousel-rtl_2s_ease-in-out_infinite]"}},{loading:!0,loadingAnimation:"carousel-inverse",class:{thead:"after:animate-[carousel-inverse_2s_ease-in-out_infinite] rtl:after:animate-[carousel-inverse-rtl_2s_ease-in-out_infinite]"}},{loading:!0,loadingAnimation:"swing",class:{thead:"after:animate-[swing_2s_ease-in-out_infinite]"}},{loading:!0,loadingAnimation:"elastic",class:{thead:"after:animate-[elastic_2s_ease-in-out_infinite]"}}],defaultVariants:{loadingColor:"primary",loadingAnimation:"carousel"}},H={__name:"UTable",__ssrInlineRender:!0,props:r({as:{type:null,required:!1},data:{type:Array,required:!1},columns:{type:Array,required:!1},caption:{type:String,required:!1},meta:{type:Object,required:!1},empty:{type:String,required:!1},sticky:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingColor:{type:null,required:!1},loadingAnimation:{type:null,required:!1},watchOptions:{type:Object,required:!1,default:()=>({deep:!0})},globalFilterOptions:{type:Object,required:!1},columnFiltersOptions:{type:Object,required:!1},columnPinningOptions:{type:Object,required:!1},columnSizingOptions:{type:Object,required:!1},visibilityOptions:{type:Object,required:!1},sortingOptions:{type:Object,required:!1},groupingOptions:{type:Object,required:!1},expandedOptions:{type:Object,required:!1},rowSelectionOptions:{type:Object,required:!1},rowPinningOptions:{type:Object,required:!1},paginationOptions:{type:Object,required:!1},facetedOptions:{type:Object,required:!1},onSelect:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},state:{type:Object,required:!1},onStateChange:{type:Function,required:!1},renderFallbackValue:{type:null,required:!1},_features:{type:Array,required:!1},autoResetAll:{type:Boolean,required:!1},debugAll:{type:Boolean,required:!1},debugCells:{type:Boolean,required:!1},debugColumns:{type:Boolean,required:!1},debugHeaders:{type:Boolean,required:!1},debugRows:{type:Boolean,required:!1},debugTable:{type:Boolean,required:!1},defaultColumn:{type:Object,required:!1},getRowId:{type:Function,required:!1},getSubRows:{type:Function,required:!1},initialState:{type:Object,required:!1},mergeOptions:{type:Function,required:!1}},{globalFilter:{type:String,default:void 0},globalFilterModifiers:{},columnFilters:{type:Array,default:[]},columnFiltersModifiers:{},columnOrder:{type:Array,default:[]},columnOrderModifiers:{},columnVisibility:{type:Object,default:{}},columnVisibilityModifiers:{},columnPinning:{type:Object,default:{}},columnPinningModifiers:{},columnSizing:{type:Object,default:{}},columnSizingModifiers:{},columnSizingInfo:{type:Object,default:{}},columnSizingInfoModifiers:{},rowSelection:{type:Object,default:{}},rowSelectionModifiers:{},rowPinning:{type:Object,default:{}},rowPinningModifiers:{},sorting:{type:Array,default:[]},sortingModifiers:{},grouping:{type:Array,default:[]},groupingModifiers:{},expanded:{type:[Boolean,Object],default:{}},expandedModifiers:{},pagination:{type:Object,default:{}},paginationModifiers:{}}),emits:["update:globalFilter","update:columnFilters","update:columnOrder","update:columnVisibility","update:columnPinning","update:columnSizing","update:columnSizingInfo","update:rowSelection","update:rowPinning","update:sorting","update:grouping","update:expanded","update:pagination"],setup(e,{expose:t}){const o=e,i=s(),{t:r}=a(),O=l(),C=d(o.data??[]),z=u((()=>o.columns??Object.keys(C.value[0]??{}).map((e=>({accessorKey:e,header:R(e)}))))),E=u((()=>o.meta??{})),Y=u((()=>{var e;return n({extend:n(N),...(null==(e=O.ui)?void 0:e.table)||{}})({sticky:o.sticky,loading:o.loading,loadingColor:o.loadingColor,loadingAnimation:o.loadingAnimation})})),G=c(e,"globalFilter",{type:String,default:void 0}),H=c(e,"columnFilters",{type:Array,default:[]}),W=c(e,"columnOrder",{type:Array,default:[]}),K=c(e,"columnVisibility",{type:Object,default:{}}),Z=c(e,"columnPinning",{type:Object,default:{}}),J=c(e,"columnSizing",{type:Object,default:{}}),Q=c(e,"columnSizingInfo",{type:Object,default:{}}),X=c(e,"rowSelection",{type:Object,default:{}}),ee=c(e,"rowPinning",{type:Object,default:{}}),te=c(e,"sorting",{type:Array,default:[]}),ae=c(e,"grouping",{type:Array,default:[]}),le=c(e,"expanded",{type:[Boolean,Object],default:{}}),ne=c(e,"pagination",{type:Object,default:{}}),oe=d(),ie=M({...V(o,"as","data","columns","caption","sticky","loading","loadingColor","loadingAnimation","class","ui"),data:C,columns:z.value,meta:E.value,getCoreRowModel:B(),...o.globalFilterOptions||{},onGlobalFilterChange:e=>valueUpdater(e,G),...o.columnFiltersOptions||{},getFilteredRowModel:U(),onColumnFiltersChange:e=>valueUpdater(e,H),onColumnOrderChange:e=>valueUpdater(e,W),...o.visibilityOptions||{},onColumnVisibilityChange:e=>valueUpdater(e,K),...o.columnPinningOptions||{},onColumnPinningChange:e=>valueUpdater(e,Z),...o.columnSizingOptions||{},onColumnSizingChange:e=>valueUpdater(e,J),onColumnSizingInfoChange:e=>valueUpdater(e,Q),...o.rowSelectionOptions||{},onRowSelectionChange:e=>valueUpdater(e,X),...o.rowPinningOptions||{},onRowPinningChange:e=>valueUpdater(e,ee),...o.sortingOptions||{},getSortedRowModel:T(),onSortingChange:e=>valueUpdater(e,te),...o.groupingOptions||{},onGroupingChange:e=>valueUpdater(e,ae),...o.expandedOptions||{},getExpandedRowModel:I(),onExpandedChange:e=>valueUpdater(e,le),...o.paginationOptions||{},onPaginationChange:e=>valueUpdater(e,ne),...o.facetedOptions||{},state:{get globalFilter(){return G.value},get columnFilters(){return H.value},get columnOrder(){return W.value},get columnVisibility(){return K.value},get columnPinning(){return Z.value},get expanded(){return le.value},get rowSelection(){return X.value},get sorting(){return te.value},get grouping(){return ae.value},get rowPinning(){return ee.value},get columnSizing(){return J.value},get columnSizingInfo(){return Q.value},get pagination(){return ne.value}}});function valueUpdater(e,t){t.value="function"==typeof e?e(t.value):e}return p((()=>o.data),(()=>{C.value=o.data?[...o.data]:[]}),o.watchOptions),t({tableRef:oe,tableApi:ie}),(t,a,l,n)=>{var s;a(j(g(A),f({as:e.as,class:Y.value.root({class:[o.class,null==(s=o.ui)?void 0:s.root]})},n),{default:m(((a,l,n,s)=>{var d,u,c,p,m,O,C,A,R,M,I,T,U,B,V,E,G,N;if(!l)return[b("table",{ref_key:"tableRef",ref:oe,class:Y.value.base({class:[null==(M=o.ui)?void 0:M.base]})},[e.caption||i.caption?(x(),v("caption",{key:0,class:Y.value.caption({class:[null==(I=o.ui)?void 0:I.caption]})},[h(t.$slots,"caption",{},(()=>[$(_(e.caption),1)]))],2)):y("",!0),b("thead",{class:Y.value.thead({class:[null==(T=o.ui)?void 0:T.thead]})},[(x(!0),v(w,null,k(g(ie).getHeaderGroups(),(e=>{var a;return x(),v("tr",{key:e.id,class:Y.value.tr({class:[null==(a=o.ui)?void 0:a.tr]})},[(x(!0),v(w,null,k(e.headers,(e=>{var a,l,n,i,r;return x(),v("th",{key:e.id,"data-pinned":e.column.getIsPinned(),colspan:e.colSpan>1?e.colSpan:void 0,class:Y.value.th({class:[null==(a=o.ui)?void 0:a.th,"function"==typeof(null==(n=null==(l=e.column.columnDef.meta)?void 0:l.class)?void 0:n.th)?e.column.columnDef.meta.class.th(e):null==(r=null==(i=e.column.columnDef.meta)?void 0:i.class)?void 0:r.th],pinned:!!e.column.getIsPinned()})},[h(t.$slots,`${e.id}-header`,f({ref_for:!0},e.getContext()),(()=>[e.isPlaceholder?y("",!0):(x(),v(g(L),{key:0,render:e.column.columnDef.header,props:e.getContext()},null,8,["render","props"]))]))],10,["data-pinned","colspan"])})),128))],2)})),128))],2),b("tbody",{class:Y.value.tbody({class:[null==(U=o.ui)?void 0:U.tbody]})},[(null==(B=g(ie).getRowModel().rows)?void 0:B.length)?(x(!0),v(w,{key:0},k(g(ie).getRowModel().rows,(e=>{var a,l,n,i,r,s,d;return x(),v(w,{key:e.id},[b("tr",{"data-selected":e.getIsSelected(),"data-selectable":!!o.onSelect,"data-expanded":e.getIsExpanded(),role:o.onSelect?"button":void 0,tabindex:o.onSelect?0:void 0,class:Y.value.tr({class:[null==(a=o.ui)?void 0:a.tr,"function"==typeof(null==(n=null==(l=g(ie).options.meta)?void 0:l.class)?void 0:n.tr)?g(ie).options.meta.class.tr(e):null==(r=null==(i=g(ie).options.meta)?void 0:i.class)?void 0:r.tr]}),onClick:t=>function(e,t){if(!o.onSelect)return;const a=t.target;a.closest("button")||a.closest("a")||(t.preventDefault(),t.stopPropagation(),o.onSelect(e,t))}(e,t)},[(x(!0),v(w,null,k(e.getVisibleCells(),(e=>{var a,l,n,i,r;return x(),v("td",{key:e.id,"data-pinned":e.column.getIsPinned(),class:Y.value.td({class:[null==(a=o.ui)?void 0:a.td,"function"==typeof(null==(n=null==(l=e.column.columnDef.meta)?void 0:l.class)?void 0:n.td)?e.column.columnDef.meta.class.td(e):null==(r=null==(i=e.column.columnDef.meta)?void 0:i.class)?void 0:r.td],pinned:!!e.column.getIsPinned()})},[h(t.$slots,`${e.column.id}-cell`,f({ref_for:!0},e.getContext()),(()=>[b(g(L),{render:e.column.columnDef.cell,props:e.getContext()},null,8,["render","props"])]))],10,["data-pinned"])})),128))],10,["data-selected","data-selectable","data-expanded","role","tabindex","onClick"]),e.getIsExpanded()?(x(),v("tr",{key:0,class:Y.value.tr({class:[null==(s=o.ui)?void 0:s.tr]})},[b("td",{colspan:e.getAllCells().length,class:Y.value.td({class:[null==(d=o.ui)?void 0:d.td]})},[h(t.$slots,"expanded",{row:e})],10,["colspan"])],2)):y("",!0)],64)})),128)):e.loading&&i.loading?(x(),v("tr",{key:1},[b("td",{colspan:null==(V=z.value)?void 0:V.length,class:Y.value.loading({class:null==(E=o.ui)?void 0:E.loading})},[h(t.$slots,"loading")],10,["colspan"])])):(x(),v("tr",{key:2},[b("td",{colspan:null==(G=z.value)?void 0:G.length,class:Y.value.empty({class:null==(N=o.ui)?void 0:N.empty})},[h(t.$slots,"empty",{},(()=>[$(_(e.empty||g(r)("table.noData")),1)]))],10,["colspan"])]))],2)],2)];l(`<table class="${S(Y.value.base({class:[null==(d=o.ui)?void 0:d.base]}))}"${s}>`),e.caption||i.caption?(l(`<caption class="${S(Y.value.caption({class:[null==(u=o.ui)?void 0:u.caption]}))}"${s}>`),F(t.$slots,"caption",{},(()=>{l(`${P(e.caption)}`)}),l,n,s),l("</caption>")):l("\x3c!----\x3e"),l(`<thead class="${S(Y.value.thead({class:[null==(c=o.ui)?void 0:c.thead]}))}"${s}>\x3c!--[--\x3e`),q(g(ie).getHeaderGroups(),(e=>{var a;l(`<tr class="${S(Y.value.tr({class:[null==(a=o.ui)?void 0:a.tr]}))}"${s}>\x3c!--[--\x3e`),q(e.headers,(e=>{var a,i,r,d,u;l(`<th${D("data-pinned",e.column.getIsPinned())}${D("colspan",e.colSpan>1?e.colSpan:void 0)} class="${S(Y.value.th({class:[null==(a=o.ui)?void 0:a.th,"function"==typeof(null==(r=null==(i=e.column.columnDef.meta)?void 0:i.class)?void 0:r.th)?e.column.columnDef.meta.class.th(e):null==(u=null==(d=e.column.columnDef.meta)?void 0:d.class)?void 0:u.th],pinned:!!e.column.getIsPinned()}))}"${s}>`),F(t.$slots,`${e.id}-header`,f({ref_for:!0},e.getContext()),(()=>{e.isPlaceholder?l("\x3c!----\x3e"):l(j(g(L),{render:e.column.columnDef.header,props:e.getContext()},null,n,s))}),l,n,s),l("</th>")})),l("\x3c!--]--\x3e</tr>")})),l(`\x3c!--]--\x3e</thead><tbody class="${S(Y.value.tbody({class:[null==(p=o.ui)?void 0:p.tbody]}))}"${s}>`),(null==(m=g(ie).getRowModel().rows)?void 0:m.length)?(l("\x3c!--[--\x3e"),q(g(ie).getRowModel().rows,(e=>{var a,i,r,d,u,c,p;l(`\x3c!--[--\x3e<tr${D("data-selected",e.getIsSelected())}${D("data-selectable",!!o.onSelect)}${D("data-expanded",e.getIsExpanded())}${D("role",o.onSelect?"button":void 0)}${D("tabindex",o.onSelect?0:void 0)} class="${S(Y.value.tr({class:[null==(a=o.ui)?void 0:a.tr,"function"==typeof(null==(r=null==(i=g(ie).options.meta)?void 0:i.class)?void 0:r.tr)?g(ie).options.meta.class.tr(e):null==(u=null==(d=g(ie).options.meta)?void 0:d.class)?void 0:u.tr]}))}"${s}>\x3c!--[--\x3e`),q(e.getVisibleCells(),(e=>{var a,i,r,d,u;l(`<td${D("data-pinned",e.column.getIsPinned())} class="${S(Y.value.td({class:[null==(a=o.ui)?void 0:a.td,"function"==typeof(null==(r=null==(i=e.column.columnDef.meta)?void 0:i.class)?void 0:r.td)?e.column.columnDef.meta.class.td(e):null==(u=null==(d=e.column.columnDef.meta)?void 0:d.class)?void 0:u.td],pinned:!!e.column.getIsPinned()}))}"${s}>`),F(t.$slots,`${e.column.id}-cell`,f({ref_for:!0},e.getContext()),(()=>{l(j(g(L),{render:e.column.columnDef.cell,props:e.getContext()},null,n,s))}),l,n,s),l("</td>")})),l("\x3c!--]--\x3e</tr>"),e.getIsExpanded()?(l(`<tr class="${S(Y.value.tr({class:[null==(c=o.ui)?void 0:c.tr]}))}"${s}><td${D("colspan",e.getAllCells().length)} class="${S(Y.value.td({class:[null==(p=o.ui)?void 0:p.td]}))}"${s}>`),F(t.$slots,"expanded",{row:e},null,l,n,s),l("</td></tr>")):l("\x3c!----\x3e"),l("\x3c!--]--\x3e")})),l("\x3c!--]--\x3e")):e.loading&&i.loading?(l(`<tr${s}><td${D("colspan",null==(O=z.value)?void 0:O.length)} class="${S(Y.value.loading({class:null==(C=o.ui)?void 0:C.loading}))}"${s}>`),F(t.$slots,"loading",{},null,l,n,s),l("</td></tr>")):(l(`<tr${s}><td${D("colspan",null==(A=z.value)?void 0:A.length)} class="${S(Y.value.empty({class:null==(R=o.ui)?void 0:R.empty}))}"${s}>`),F(t.$slots,"empty",{},(()=>{l(`${P(e.empty||g(r)("table.noData"))}`)}),l,n,s),l("</td></tr>")),l("</tbody></table>")})),_:3},l))}}},W=H.setup;H.setup=(e,t)=>{const a=O();return(a.modules||(a.modules=new Set)).add("../node_modules/@nuxt/ui/dist/runtime/components/Table.vue"),W?W(e,t):void 0};const K=C({__name:"sparky-dashboard",__ssrInlineRender:!0,setup(a){const l=d(!0),n=d([]),r=d([]),s=d({todayPnL:0,winRate:0,totalTrades:0}),u=d(7),c=d(null);let p=null;const g=[{key:"symbol",label:"Symbol"},{key:"side",label:"Side"},{key:"entry_price",label:"Entry Price"},{key:"current_price",label:"Current Price"},{key:"position_size_usd",label:"Size ($)"},{key:"unrealized_pnl_usd",label:"Unrealized P&L"},{key:"time_open",label:"Time Open"}];async function loadChartData(){try{!function(e){if(!c.value)return;p&&p.destroy();const t=c.value.getContext("2d");if(!t)return;p=new Y(t,{type:"line",data:{labels:e.map((e=>e.date)),datasets:[{label:"Cumulative P&L",data:e.map((e=>e.cumulative_pnl)),borderColor:e.length>0&&e[e.length-1].cumulative_pnl>=0?"#10b981":"#ef4444",backgroundColor:e.length>0&&e[e.length-1].cumulative_pnl>=0?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)",borderWidth:2,fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>`$${e}`}}}}})}(await E(u.value))}catch(e){console.error("Error loading chart data:",e)}}function formatDuration(e){const t=Date.now()-new Date(e).getTime(),a=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);if(a>24){return`${Math.floor(a/24)}d ${a%24}h`}return`${a}h ${l}m`}function formatTime(e){const t=new Date(e),a=(new Date).getTime()-t.getTime(),l=Math.floor(a/6e4);if(l<60)return`${l}m ago`;const n=Math.floor(l/60);return n<24?`${n}h ago`:t.toLocaleDateString()}return(a,d,p,h)=>{const O=e,C=t,F=o,D=H,A=i;d(`<div${z(f({class:"space-y-6"},h))} data-v-fbbdb184><div class="flex items-center justify-between" data-v-fbbdb184><div data-v-fbbdb184><h1 class="text-3xl font-bold" data-v-fbbdb184>Sparky Trading Bot</h1><p class="text-gray-500 dark:text-gray-400 mt-1" data-v-fbbdb184>Real-time analytics and performance tracking</p></div>`),d(j(O,{color:l.value?"success":"error",size:"lg"},{default:m(((e,t,a,n)=>{if(!t)return[$(_(l.value?"Connected":"Disconnected"),1)];t(`${P(l.value?"Connected":"Disconnected")}`)})),_:1},p)),d('</div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4" data-v-fbbdb184>'),d(j(C,null,{default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("div",null,[b("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Today's P&L"),b("p",{class:["text-2xl font-bold mt-1",s.value.todayPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]},_(s.value.todayPnL>=0?"+":"")+"$"+_(s.value.todayPnL.toFixed(2)),3)]),b(F,{name:"i-heroicons-currency-dollar",class:"w-10 h-10 text-gray-400"})])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><div data-v-fbbdb184${l}><p class="text-sm text-gray-500 dark:text-gray-400" data-v-fbbdb184${l}>Today&#39;s P&amp;L</p><p class="${S(["text-2xl font-bold mt-1",s.value.todayPnL>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])}" data-v-fbbdb184${l}>${P(s.value.todayPnL>=0?"+":"")}$${P(s.value.todayPnL.toFixed(2))}</p></div>`),t(j(F,{name:"i-heroicons-currency-dollar",class:"w-10 h-10 text-gray-400"},null,a,l)),t("</div>")})),_:1},p)),d(j(C,null,{default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("div",null,[b("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Win Rate"),b("p",{class:"text-2xl font-bold mt-1"},_(s.value.winRate.toFixed(1))+"%",1)]),b(F,{name:"i-heroicons-chart-bar",class:"w-10 h-10 text-gray-400"})])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><div data-v-fbbdb184${l}><p class="text-sm text-gray-500 dark:text-gray-400" data-v-fbbdb184${l}>Win Rate</p><p class="text-2xl font-bold mt-1" data-v-fbbdb184${l}>${P(s.value.winRate.toFixed(1))}%</p></div>`),t(j(F,{name:"i-heroicons-chart-bar",class:"w-10 h-10 text-gray-400"},null,a,l)),t("</div>")})),_:1},p)),d(j(C,null,{default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("div",null,[b("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Open Positions"),b("p",{class:"text-2xl font-bold mt-1"},_(n.value.length),1)]),b(F,{name:"i-heroicons-shopping-cart",class:"w-10 h-10 text-gray-400"})])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><div data-v-fbbdb184${l}><p class="text-sm text-gray-500 dark:text-gray-400" data-v-fbbdb184${l}>Open Positions</p><p class="text-2xl font-bold mt-1" data-v-fbbdb184${l}>${P(n.value.length)}</p></div>`),t(j(F,{name:"i-heroicons-shopping-cart",class:"w-10 h-10 text-gray-400"},null,a,l)),t("</div>")})),_:1},p)),d(j(C,null,{default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("div",null,[b("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Trades Today"),b("p",{class:"text-2xl font-bold mt-1"},_(s.value.totalTrades),1)]),b(F,{name:"i-heroicons-arrows-right-left",class:"w-10 h-10 text-gray-400"})])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><div data-v-fbbdb184${l}><p class="text-sm text-gray-500 dark:text-gray-400" data-v-fbbdb184${l}>Trades Today</p><p class="text-2xl font-bold mt-1" data-v-fbbdb184${l}>${P(s.value.totalTrades)}</p></div>`),t(j(F,{name:"i-heroicons-arrows-right-left",class:"w-10 h-10 text-gray-400"},null,a,l)),t("</div>")})),_:1},p)),d("</div>"),n.value.length>0?d(j(C,null,{header:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("h3",{class:"text-lg font-semibold"},"Open Positions"),b(O,null,{default:m((()=>[$(_(n.value.length)+" Active",1)])),_:1})])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><h3 class="text-lg font-semibold" data-v-fbbdb184${l}>Open Positions</h3>`),t(j(O,null,{default:m(((e,t,a,l)=>{if(!t)return[$(_(n.value.length)+" Active",1)];t(`${P(n.value.length)} Active`)})),_:1},a,l)),t("</div>")})),default:m(((e,t,a,l)=>{if(!t)return[b(D,{columns:g,rows:n.value},{"symbol-data":m((({row:e})=>[b("span",{class:"font-mono font-semibold"},_(e.symbol),1)])),"side-data":m((({row:e})=>[b(O,{color:"BUY"===e.side?"green":"red"},{default:m((()=>[$(_(e.side),1)])),_:2},1032,["color"])])),"entry_price-data":m((({row:e})=>[b("span",{class:"font-mono"},"$"+_(parseFloat(e.entry_price).toFixed(2)),1)])),"current_price-data":m((({row:e})=>[b("span",{class:"font-mono"},"$"+_(parseFloat(e.current_price||e.entry_price).toFixed(2)),1)])),"unrealized_pnl_usd-data":m((({row:e})=>[b("span",{class:["font-mono font-semibold",(e.unrealized_pnl_usd||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]},[$(_((e.unrealized_pnl_usd||0)>=0?"+":"")+"$"+_((e.unrealized_pnl_usd||0).toFixed(2))+" ",1),b("span",{class:"text-sm"}," ("+_((e.unrealized_pnl_percent||0).toFixed(2))+"%) ",1)],2)])),"time_open-data":m((({row:e})=>[b("span",{class:"text-sm text-gray-500"},_(formatDuration(e.entry_time)),1)])),_:1},8,["rows"])];t(j(D,{columns:g,rows:n.value},{"symbol-data":m((({row:e},t,a,l)=>{if(!t)return[b("span",{class:"font-mono font-semibold"},_(e.symbol),1)];t(`<span class="font-mono font-semibold" data-v-fbbdb184${l}>${P(e.symbol)}</span>`)})),"side-data":m((({row:e},t,a,l)=>{if(!t)return[b(O,{color:"BUY"===e.side?"green":"red"},{default:m((()=>[$(_(e.side),1)])),_:2},1032,["color"])];t(j(O,{color:"BUY"===e.side?"green":"red"},{default:m(((t,a,l,n)=>{if(!a)return[$(_(e.side),1)];a(`${P(e.side)}`)})),_:2},a,l))})),"entry_price-data":m((({row:e},t,a,l)=>{if(!t)return[b("span",{class:"font-mono"},"$"+_(parseFloat(e.entry_price).toFixed(2)),1)];t(`<span class="font-mono" data-v-fbbdb184${l}>$${P(parseFloat(e.entry_price).toFixed(2))}</span>`)})),"current_price-data":m((({row:e},t,a,l)=>{if(!t)return[b("span",{class:"font-mono"},"$"+_(parseFloat(e.current_price||e.entry_price).toFixed(2)),1)];t(`<span class="font-mono" data-v-fbbdb184${l}>$${P(parseFloat(e.current_price||e.entry_price).toFixed(2))}</span>`)})),"unrealized_pnl_usd-data":m((({row:e},t,a,l)=>{if(!t)return[b("span",{class:["font-mono font-semibold",(e.unrealized_pnl_usd||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]},[$(_((e.unrealized_pnl_usd||0)>=0?"+":"")+"$"+_((e.unrealized_pnl_usd||0).toFixed(2))+" ",1),b("span",{class:"text-sm"}," ("+_((e.unrealized_pnl_percent||0).toFixed(2))+"%) ",1)],2)];t(`<span class="${S(["font-mono font-semibold",(e.unrealized_pnl_usd||0)>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])}" data-v-fbbdb184${l}>${P((e.unrealized_pnl_usd||0)>=0?"+":"")}$${P((e.unrealized_pnl_usd||0).toFixed(2))} <span class="text-sm" data-v-fbbdb184${l}> (${P((e.unrealized_pnl_percent||0).toFixed(2))}%) </span></span>`)})),"time_open-data":m((({row:e},t,a,l)=>{if(!t)return[b("span",{class:"text-sm text-gray-500"},_(formatDuration(e.entry_time)),1)];t(`<span class="text-sm text-gray-500" data-v-fbbdb184${l}>${P(formatDuration(e.entry_time))}</span>`)})),_:1},a,l))})),_:1},p)):d(j(C,null,{header:m(((e,t,a,l)=>{if(!t)return[b("h3",{class:"text-lg font-semibold"},"Open Positions")];t(`<h3 class="text-lg font-semibold" data-v-fbbdb184${l}>Open Positions</h3>`)})),default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"text-center py-12"},[b(F,{name:"i-heroicons-inbox",class:"w-16 h-16 text-gray-400 mx-auto mb-4"}),b("p",{class:"text-gray-500 dark:text-gray-400"},"No open positions")])];t(`<div class="text-center py-12" data-v-fbbdb184${l}>`),t(j(F,{name:"i-heroicons-inbox",class:"w-16 h-16 text-gray-400 mx-auto mb-4"},null,a,l)),t(`<p class="text-gray-500 dark:text-gray-400" data-v-fbbdb184${l}>No open positions</p></div>`)})),_:1},p)),d('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6" data-v-fbbdb184>'),d(j(C,null,{header:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"flex items-center justify-between"},[b("h3",{class:"text-lg font-semibold"},"Cumulative P&L"),b("div",{class:"flex gap-2"},[b(A,{color:7===u.value?"primary":"gray",size:"xs",onClick:e=>{u.value=7,loadChartData()}},{default:m((()=>[$(" 7D ")])),_:1},8,["color","onClick"]),b(A,{color:30===u.value?"primary":"gray",size:"xs",onClick:e=>{u.value=30,loadChartData()}},{default:m((()=>[$(" 30D ")])),_:1},8,["color","onClick"])])])];t(`<div class="flex items-center justify-between" data-v-fbbdb184${l}><h3 class="text-lg font-semibold" data-v-fbbdb184${l}>Cumulative P&amp;L</h3><div class="flex gap-2" data-v-fbbdb184${l}>`),t(j(A,{color:7===u.value?"primary":"gray",size:"xs",onClick:e=>{u.value=7,loadChartData()}},{default:m(((e,t,a,l)=>{if(!t)return[$(" 7D ")];t(" 7D ")})),_:1},a,l)),t(j(A,{color:30===u.value?"primary":"gray",size:"xs",onClick:e=>{u.value=30,loadChartData()}},{default:m(((e,t,a,l)=>{if(!t)return[$(" 30D ")];t(" 30D ")})),_:1},a,l)),t("</div></div>")})),default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"h-64",ref:"chartContainer"},[b("canvas",{ref_key:"pnlChart",ref:c},null,512)],512)];t(`<div class="h-64" data-v-fbbdb184${l}><canvas data-v-fbbdb184${l}></canvas></div>`)})),_:1},p)),d(j(C,null,{header:m(((e,t,a,l)=>{if(!t)return[b("h3",{class:"text-lg font-semibold"},"Recent Trades")];t(`<h3 class="text-lg font-semibold" data-v-fbbdb184${l}>Recent Trades</h3>`)})),default:m(((e,t,a,l)=>{if(!t)return[b("div",{class:"space-y-2 max-h-64 overflow-y-auto"},[(x(!0),v(w,null,k(r.value,(e=>(x(),v("div",{key:e.id,class:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800"},[b("div",{class:"flex items-center gap-3"},[b(O,{color:"BUY"===e.side?"green":"red",size:"xs"},{default:m((()=>[$(_(e.side),1)])),_:2},1032,["color"]),b("span",{class:"font-mono font-semibold"},_(e.symbol),1),b("span",{class:"text-sm text-gray-500"},_(formatTime(e.exit_time)),1)]),b("div",{class:"text-right"},[b("div",{class:["font-mono font-semibold",e.is_winner?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"]},_(e.pnl_usd>=0?"+":"")+"$"+_(e.pnl_usd.toFixed(2)),3),b("div",{class:"text-xs text-gray-500"},_(e.pnl_percent.toFixed(2))+"% ",1)])])))),128)),0===r.value.length?(x(),v("div",{key:0,class:"text-center py-8 text-gray-500"}," No trades yet ")):y("",!0)])];t(`<div class="space-y-2 max-h-64 overflow-y-auto" data-v-fbbdb184${l}>\x3c!--[--\x3e`),q(r.value,(e=>{t(`<div class="flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800" data-v-fbbdb184${l}><div class="flex items-center gap-3" data-v-fbbdb184${l}>`),t(j(O,{color:"BUY"===e.side?"green":"red",size:"xs"},{default:m(((t,a,l,n)=>{if(!a)return[$(_(e.side),1)];a(`${P(e.side)}`)})),_:2},a,l)),t(`<span class="font-mono font-semibold" data-v-fbbdb184${l}>${P(e.symbol)}</span><span class="text-sm text-gray-500" data-v-fbbdb184${l}>${P(formatTime(e.exit_time))}</span></div><div class="text-right" data-v-fbbdb184${l}><div class="${S(["font-mono font-semibold",e.is_winner?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"])}" data-v-fbbdb184${l}>${P(e.pnl_usd>=0?"+":"")}$${P(e.pnl_usd.toFixed(2))}</div><div class="text-xs text-gray-500" data-v-fbbdb184${l}>${P(e.pnl_percent.toFixed(2))}% </div></div></div>`)})),t("\x3c!--]--\x3e"),0===r.value.length?t(`<div class="text-center py-8 text-gray-500" data-v-fbbdb184${l}> No trades yet </div>`):t("\x3c!----\x3e"),t("</div>")})),_:1},p)),d("</div></div>")}}}),Z=K.setup;K.setup=(e,t)=>{const a=O();return(a.modules||(a.modules=new Set)).add("pages/sparky-dashboard.vue"),Z?Z(e,t):void 0};const J=G(K,[["__scopeId","data-v-fbbdb184"]]);export{J as default};
//# sourceMappingURL=sparky-dashboard.vue.mjs.map
